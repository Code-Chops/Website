@ChildContent

@* Style not placed in CSS in order to be displayed immediately *@
<div id="overlay"
     class="@(If(!IsLoading, "dissolveOverlay"))"
     style=" position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--overlay-background-color, white); pointer-events: none; z-index: 1001;">
</div>

<a id="clickableLogo" href="@If(!IsLoading, "/")">
    <div id="logo" class="@(IsLoading ? "splashLogo" : "attachedLogo")" >
        <div id="logoBackground"></div>
        <div id="logoM"></div>
        <div id="logoA"></div>
        <div id="logoX"></div>
        <div id="logoB"></div>
    </div>
</a>

@if (IsLoading)
{
    <div class="loading-progress-text"></div>
}


@code {
    [Inject] protected RenderEnvironment RenderEnvironment { get; set; } = null!;
    [Parameter] public RenderFragment ChildContent { get; set; } = null!;

    private bool IsRenderedOnClient => RenderEnvironment is not RenderEnvironment.WebassemblyHost;
    private bool IsLoading { get; set; } = true;

    protected override void OnInitialized()
    {
        /*
        Console.WriteLine("OnInitialized");
        Console.WriteLine($"IsLoading: {IsLoading}");
        Console.WriteLine($"RenderEnvironment: {RenderEnvironment}");
        */

        if (IsRenderedOnClient)
            IsLoading = false;

        Console.WriteLine(Branding.BannerText);
    }
}
